#!/bin/bash
grep -P '(?:^|])[^[]*(.)(.)(?!\1)\2\1' input.txt | grep -vP '\[[^]]*(.)(.)(?!=\1)\2\1' | wc -l
grep -P '(?:^|])[^[]*(.)(?!\1)(.)\1.*\[[^]]*\2\1\2|\[[^]]*(.)(?!\3)(.)\3.*\][^[]*\4\3\4' input.txt | wc -l
